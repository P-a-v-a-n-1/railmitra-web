<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Community Chat</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Custom Styles -->
    <style>
        /* Gradient background with smooth animation */
        .gradient-custom {
            background: linear-gradient(90deg, #5356FF, #378CE7, #67C6E3, #DFFF5F); /* Gradient background */
        }

        /* Card styling with hover effect */
        .chat-card {
            background: rgba(255, 255, 255, 0.9); /* Light background */
            border-radius: 10px; /* Rounded corners */
            padding: 15px; /* Padding for content */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); /* Subtle shadow */
        }

        /* Custom styling for my messages */
        .my-message {
            background: #5356FF; /* Blue for my messages */
            color: white; /* White text */
            border-radius: 10px; /* Rounded corners */
            text-align: right; /* Align text to the right */
            padding: 10px; /* Padding for content */
        }

        /* Custom styling for other users' messages */
        .other-message {
            background: #e0e0e0; /* Grey for other users' messages */
            color: black; /* Dark text */
            border-radius: 10px; /* Rounded corners */
            text-align: left; /* Align text to the left */
            padding: 10px; /* Padding for content */
        }

        /* Styling for the input field */
        .chat-input {
            border: 2px solid #378CE7; /* Blue border */
            border-radius: 10px; /* Rounded corners */
            padding: 10px; /* Padding for input */
            width: calc(100% - 80px); /* Full width minus button width and margin */
        }

        /* Styling for the send button */
        .send-button {
            background-color: #5356FF; /* Deep blue for the button */
            color: white; /* White text */
            border-radius: 10px; /* Rounded corners */
            padding: 10px 20px; /* Padding for button */
            border: none; /* No border */
            margin-left: 10px; /* Margin for spacing */
        }
    </style>
</head>
<body class="gradient-custom"> <!-- Gradient background -->
    <div class="container py-5"> <!-- Bootstrap container -->

        <h2 class="text-center text-white">Community Chat</h2> <!-- Page title -->

        <!-- Chat messages section -->
        <div class="chat-card" id="messageArea"> <!-- Chat card with message area -->
            <!-- Messages will be displayed here -->
        </div>

        <!-- Input field for new messages -->
        <div class="mt-4 d-flex"> <!-- Row for input and send button -->
            <textarea id="messageInput" class="chat-input" placeholder="Write your message..." rows="1"></textarea> <!-- Input for message -->
            <button class="send-button" onclick="sendMessage()">Send</button> <!-- Send button -->
        </div>

    </div>

    <!-- Firebase JavaScript SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>

    <!-- Bootstrap JS and Dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script> <!-- jQuery -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script> <!-- Bootstrap JS -->

    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyCzF2lQO3f2O7BxCMStuwTZXiP5GCccH48",
            authDomain: "railmitra-29557.firebaseapp.com",
            projectId: "railmitra-29557",
            storageBucket: "railmitra-29557.appspot.com",
            messagingSenderId: "269756755900",
            appId: "1:269756755900:web:69d475147946f789fdc5b9",
            measurementId: "G-T0MQQ6JMLD"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        var database = firebase.database();

        // Sending messages
        function sendMessage() {
            var message = document.getElementById('messageInput').value;
            database.ref('messages').push().set({
                text: message,
                timestamp: firebase.database.ServerValue.TIMESTAMP
            });
            document.getElementById('messageInput').value = '';
        }

        // Receiving messages
        database.ref('messages').on('child_added', function(snapshot) {
            var message = snapshot.val();
            displayMessage(message.text);
        });

        function displayMessage(message) {
            var messageElement = document.createElement('div');
            messageElement.textContent = message;
            messageElement.classList.add('other-message'); // Add class for styling
            document.getElementById('messageArea').appendChild(messageElement);
        }
    </script>
</body>
</html>
